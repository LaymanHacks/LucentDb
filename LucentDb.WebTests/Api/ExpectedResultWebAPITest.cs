////------------------------------------------------------------------------------
//// <autogenerated>
////     This code was generated by a tool.
////     Generated by Merlin Version: 1.0.0.0
////
////     Changes to this file may cause incorrect behavior and will be lost if 
////     the code is regenerated.
//// </autogenerated>
////------------------------------------------------------------------------------
//using System;
//using System.Collections.Generic;
//using System.Linq;
//using System.Net;
//using System.Net.Http;
//using System.Web.Http;
//using Microsoft.VisualStudio.TestTools.UnitTesting;
//using Moq;
//using LucentDb.Data.Repository;
//using LucentDb.Domain.Entities;
//using LucentDb.Web.UI.Controllers.Api;

//namespace LucentDb.Web.UI.Test.Controllers.Api
//{
//    [TestFixture()]
//    public class ExpectedResultApiControllerTests
//    {
        
//        private Mock<IExpectedResultRepository> _repository;

//        private List<ExpectedResult> _repositoryList = new List<ExpectedResult>
//        {
//        //TODO Initialize test data
//            new ExpectedResult()
//        };

//        private ExpectedResultApiController _target;
        
//        [TestInitialize]
//        public void Init()
//        {
//            _repository = new Mock<IExpectedResultRepository>();
//            _target = new ExpectedResultApiController(_repository.Object)
//            {
//                Request = new HttpRequestMessage { RequestUri = new Uri("http://localhost/api/ExpectedResults") }
//            };

//            var config = new HttpConfiguration();

//            config.MapHttpAttributeRoutes();
//            config.EnsureInitialized();

//            _target.Request.SetConfiguration(config);
//        }
   
//                [Test()]
//        public void GetDataTest() 
//        {
//            _repository
//                 .Setup(it => it.GetData())
//                     .Returns(_repositoryList);
                
//            var result = _target.GetData().ToList();
//             Assert.AreEqual(_repositoryList.ToList().Count, result.Count);
//        }

//        [Test()]
//        public void Update_Should_Update_A_ExpectedResult() 
//        {
//            _repository
//                 .Setup(it => it.Update(It.IsAny<Int32>(), It.IsAny<Int32?>(), It.IsAny<Int32?>(), It.IsAny<String>(), It.IsAny<Int32>(), It.IsAny<Int32>()))
//                 .Callback<Int32, Int32?, Int32?, String, Int32, Int32>((testId, expectedResultTypeId, assertTypeId, expectedValue, resultIndex, id) => 
//            { 
//                 var tExpectedResult = _repositoryList.Find(x => x.Id==id);
//                 tExpectedResult.TestId = testId; 
//                 tExpectedResult.ExpectedResultTypeId = expectedResultTypeId; 
//                 tExpectedResult.AssertTypeId = assertTypeId; 
//                 tExpectedResult.ExpectedValue = expectedValue; 
//                 tExpectedResult.ResultIndex = resultIndex; 
//            });
//            var tempExpectedResult = _repositoryList.Find(x => x.Id==id);
//            var testExpectedResult = new ExpectedResult {
//                 Id = tempExpectedResult.Id, 
//                 TestId = tempExpectedResult.TestId, 
//                 ExpectedResultTypeId = tempExpectedResult.ExpectedResultTypeId, 
//                 AssertTypeId = tempExpectedResult.AssertTypeId, 
//                 ExpectedValue = tempExpectedResult.ExpectedValue, 
//                 ResultIndex = tempExpectedResult.ResultIndex};
            
//            //TODO change something on testExpectedResult
//            //testExpectedResult.oldValue = newValue; 
//            _target.Update(testExpectedResult);
//            //Assert.AreEqual(newValue, _repositoryList.Find(x => x.Id==1).oldValue);
//            //TODO fail until we update the test above
//            Assert.Fail();
//        }

//        [Test()]
//        public void Delete_Should_Delete_A_ExpectedResult() 
//        {
//            _repository
//                 .Setup(it => it.Delete(It.IsAny<Int32>()))  
//                 .Callback<Int32>((id) => 
//                 { 
//                      var i = _repositoryList.FindIndex(q => q.Id==id);
//                      _repositoryList.RemoveAt(i);
//                 });
//            var iniCount = _repositoryList.Count();
//            HttpResponseMessage result = _target.Delete(1);
//            Assert.AreEqual(iniCount - 1, _repositoryList.Count());
//            Assert.AreEqual(HttpStatusCode.OK, result.StatusCode);
//        }

//        [Test()]
//        public void Insert_Should_Insert_A_ExpectedResult() 
//        {
//            _repository
//                 .Setup(it => it.Insert(It.IsAny<Int32>(), It.IsAny<Int32?>(), It.IsAny<Int32?>(), It.IsAny<String>(), It.IsAny<Int32>()))
//                 .Returns<Int32, Int32?, Int32?, String, Int32>((testId, expectedResultTypeId, assertTypeId, expectedValue, resultIndex) => 
//            { 
//                 _repositoryList.Add(new  ExpectedResult (testId, expectedResultTypeId, assertTypeId, expectedValue, resultIndex));
//            });
            
//            //TODO insert values 
//            _target.Insert(new ExpectedResult (testId, expectedResultTypeId, assertTypeId, expectedValue, resultIndex));
//            //Assert.AreEqual(11, _repositoryList.Count());
//            //TODO fail until we update the test above
//            Assert.Fail();
//        }

//        [Test()]
//        public void GetDataPageableTest()
//        {
//            PagedResult<ExpectedResult> expectedResult;

//            _repository
//                 .Setup(it => it.GetDataPageable(It.IsAny<String>(), It.IsAny<Int32>(), It.IsAny<Int32>()))
//                 .Returns<String, Int32, Int32>((sortExpression, page, pageSize) => 
//                 { 
//                      var query = _repositoryList;
//                      switch (sortExpression)
//                      {
//                          case  "Id":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.Id));
//                              break;
//                          case  "TestId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.TestId));
//                              break;
//                          case  "ExpectedResultTypeId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ExpectedResultTypeId));
//                              break;
//                          case  "AssertTypeId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.AssertTypeId));
//                              break;
//                          case  "ExpectedValue":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ExpectedValue));
//                              break;
//                          case  "ResultIndex":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ResultIndex));
//                              break;                      }
//                      return query.Take(pageSize).Skip((page-1)*pageSize).ToList();
//                 });

//            _repository
//                 .Setup(it => it.GetRowCount())
//                 .Returns(_repositoryList.Count);

//            var result = _target.GetDataPageable("Id", 1, 2);
//            Assert.IsTrue(result.TryGetContentValue(out expectedResult));
//            Assert.AreEqual(_repositoryList.Take(2).ToList().Count, expectedResult.Results.Count);
//            Assert.AreEqual(_repositoryList.OrderBy(q => q.Id).FirstOrDefault().Id, expectedResult.Results.FirstOrDefault().Id);
//        }

//        [Test()]
//        public void GetDataByIdTest() 
//        {
//            _repository
//                 .Setup(it => it.GetDataById(It.IsAny<Int32>()))
//                     .Returns<Int32>((id) => 
//                 { 
//                      return _repositoryList.Where(x => x.Id==id).ToList();
//                 });
                
//            var result = _target.GetDataById(idValue).ToList();
//             Assert.AreEqual(_repositoryList.Where(x => x.Id==idValue).ToList().Count, result.Count);
//        }

//        [Test()]
//        public void GetDataByAssertTypeIdTest() 
//        {
//            _repository
//                 .Setup(it => it.GetDataByAssertTypeId(It.IsAny<Int32>()))
//                     .Returns<Int32>((assertTypeId) => 
//                 { 
//                      return _repositoryList.Where(x => x.AssertTypeId==assertTypeId).ToList();
//                 });
                
//            var result = _target.GetDataByAssertTypeId(assertTypeIdValue).ToList();
//             Assert.AreEqual(_repositoryList.Where(x => x.AssertTypeId==assertTypeIdValue).ToList().Count, result.Count);
//        }

//        [Test()]
//        public void GetDataByAssertTypeIdPageableTest()
//        {
//            PagedResult<ExpectedResult> expectedResult;

//            _repository
//                 .Setup(it => it.GetDataByAssertTypeIdPageable(It.IsAny<Int32>(), It.IsAny<String>(), It.IsAny<Int32>(), It.IsAny<Int32>()))
//                 .Returns<Int32, String, Int32, Int32>((assertTypeId, sortExpression, page, pageSize) => 
//                 { 
//                      var query = _repositoryList.Where(x => x.AssertTypeId==assertTypeId);
//                      switch (sortExpression)
//                      {
//                          case  "Id":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.Id));
//                              break;
//                          case  "TestId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.TestId));
//                              break;
//                          case  "ExpectedResultTypeId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ExpectedResultTypeId));
//                              break;
//                          case  "AssertTypeId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.AssertTypeId));
//                              break;
//                          case  "ExpectedValue":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ExpectedValue));
//                              break;
//                          case  "ResultIndex":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ResultIndex));
//                              break;                      }
//                      return query.Take(pageSize).Skip((page-1)*pageSize).ToList();
//                 });

//            _repository
//                 .Setup(it => it.GetDataByAssertTypeIdRowCount(assertTypeId))
//                 .Returns(_repositoryList.Count);

//            var result = _target.GetDataByAssertTypeIdPageable(AssertTypeIdValue, "Id", 1, 2);
//            Assert.IsTrue(result.TryGetContentValue(out expectedResult));
//            Assert.AreEqual(_repositoryList.Where(x => x.AssertTypeId==assertTypeId).Take(2).ToList().Count, expectedResult.Results.Count);
//            Assert.AreEqual(_repositoryList.Where(x => x.AssertTypeId==assertTypeId).OrderBy(q => q.Id).FirstOrDefault().Id, expectedResult.Results.FirstOrDefault().Id);
//        }

//        [Test()]
//        public void GetDataByExpectedResultTypeIdTest() 
//        {
//            _repository
//                 .Setup(it => it.GetDataByExpectedResultTypeId(It.IsAny<Int32>()))
//                     .Returns<Int32>((expectedResultTypeId) => 
//                 { 
//                      return _repositoryList.Where(x => x.ExpectedResultTypeId==expectedResultTypeId).ToList();
//                 });
                
//            var result = _target.GetDataByExpectedResultTypeId(expectedResultTypeIdValue).ToList();
//             Assert.AreEqual(_repositoryList.Where(x => x.ExpectedResultTypeId==expectedResultTypeIdValue).ToList().Count, result.Count);
//        }

//        [Test()]
//        public void GetDataByExpectedResultTypeIdPageableTest()
//        {
//            PagedResult<ExpectedResult> expectedResult;

//            _repository
//                 .Setup(it => it.GetDataByExpectedResultTypeIdPageable(It.IsAny<Int32>(), It.IsAny<String>(), It.IsAny<Int32>(), It.IsAny<Int32>()))
//                 .Returns<Int32, String, Int32, Int32>((expectedResultTypeId, sortExpression, page, pageSize) => 
//                 { 
//                      var query = _repositoryList.Where(x => x.ExpectedResultTypeId==expectedResultTypeId);
//                      switch (sortExpression)
//                      {
//                          case  "Id":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.Id));
//                              break;
//                          case  "TestId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.TestId));
//                              break;
//                          case  "ExpectedResultTypeId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ExpectedResultTypeId));
//                              break;
//                          case  "AssertTypeId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.AssertTypeId));
//                              break;
//                          case  "ExpectedValue":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ExpectedValue));
//                              break;
//                          case  "ResultIndex":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ResultIndex));
//                              break;                      }
//                      return query.Take(pageSize).Skip((page-1)*pageSize).ToList();
//                 });

//            _repository
//                 .Setup(it => it.GetDataByExpectedResultTypeIdRowCount(expectedResultTypeId))
//                 .Returns(_repositoryList.Count);

//            var result = _target.GetDataByExpectedResultTypeIdPageable(ExpectedResultTypeIdValue, "Id", 1, 2);
//            Assert.IsTrue(result.TryGetContentValue(out expectedResult));
//            Assert.AreEqual(_repositoryList.Where(x => x.ExpectedResultTypeId==expectedResultTypeId).Take(2).ToList().Count, expectedResult.Results.Count);
//            Assert.AreEqual(_repositoryList.Where(x => x.ExpectedResultTypeId==expectedResultTypeId).OrderBy(q => q.Id).FirstOrDefault().Id, expectedResult.Results.FirstOrDefault().Id);
//        }

//        [Test()]
//        public void GetDataByTestIdTest() 
//        {
//            _repository
//                 .Setup(it => it.GetDataByTestId(It.IsAny<Int32>()))
//                     .Returns<Int32>((testId) => 
//                 { 
//                      return _repositoryList.Where(x => x.TestId==testId).ToList();
//                 });
                
//            var result = _target.GetDataByTestId(testIdValue).ToList();
//             Assert.AreEqual(_repositoryList.Where(x => x.TestId==testIdValue).ToList().Count, result.Count);
//        }

//        [Test()]
//        public void GetDataByTestIdPageableTest()
//        {
//            PagedResult<ExpectedResult> expectedResult;

//            _repository
//                 .Setup(it => it.GetDataByTestIdPageable(It.IsAny<Int32>(), It.IsAny<String>(), It.IsAny<Int32>(), It.IsAny<Int32>()))
//                 .Returns<Int32, String, Int32, Int32>((testId, sortExpression, page, pageSize) => 
//                 { 
//                      var query = _repositoryList.Where(x => x.TestId==testId);
//                      switch (sortExpression)
//                      {
//                          case  "Id":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.Id));
//                              break;
//                          case  "TestId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.TestId));
//                              break;
//                          case  "ExpectedResultTypeId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ExpectedResultTypeId));
//                              break;
//                          case  "AssertTypeId":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.AssertTypeId));
//                              break;
//                          case  "ExpectedValue":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ExpectedValue));
//                              break;
//                          case  "ResultIndex":
//                              query = new List<ExpectedResult>(query.OrderBy(q => q.ResultIndex));
//                              break;                      }
//                      return query.Take(pageSize).Skip((page-1)*pageSize).ToList();
//                 });

//            _repository
//                 .Setup(it => it.GetDataByTestIdRowCount(testId))
//                 .Returns(_repositoryList.Count);

//            var result = _target.GetDataByTestIdPageable(TestIdValue, "Id", 1, 2);
//            Assert.IsTrue(result.TryGetContentValue(out expectedResult));
//            Assert.AreEqual(_repositoryList.Where(x => x.TestId==testId).Take(2).ToList().Count, expectedResult.Results.Count);
//            Assert.AreEqual(_repositoryList.Where(x => x.TestId==testId).OrderBy(q => q.Id).FirstOrDefault().Id, expectedResult.Results.FirstOrDefault().Id);
//        }


//    }
//}
